#!/usr/bin/env node
const resolve = require( 'resolve' )
const path = require( 'path' )
const yargs = require( 'yargs' )

resolve( 'easy', { basedir: process.cwd() }, ( error, easyPath ) => {
    if ( null !== error ) {
        console.error( "\nImpossible to find locally easy framework, please install it with npm install easy\n" )
        return
    }

    /*
     * Expose root project path
     */
    global.easy = global.easy || {}
    global.easy.easyPath = path.dirname( easyPath )
    global.easy.appRootPath = path.resolve( `${easy.easyPath}/../../` )

    yargs
        .usage( 'Usage: easy <command>' )
        .commandDir( '../lib' )
        .demandCommand( 1 )
        .help()
        .argv
})
